# Cription プロダクト要件定義書 (PRD)

## 1. プロダクト概要

### 1.1 プロダクト名
**Cription** - AI音声認識・文字起こしアプリ

### 1.2 プロダクトビジョン
音声を高精度でテキストに変換する、プライバシーを重視したAI音声認識アプリケーション。ローカル処理とクラウドAPIのハイブリッド方式により、プライバシー保護と高精度を両立し、プロフェッショナルグレードの精度を提供する。

### 1.3 ターゲットユーザー
- **ビジネスプロフェッショナル**: 会議の議事録作成、インタビュー記録
- **学生・研究者**: 講義の文字起こし、研究インタビュー
- **コンテンツクリエイター**: ポッドキャスト、動画コンテンツの文字起こし
- **アクセシビリティユーザー**: 聴覚障害者向けサポート
- **医療・法務関係者**: 機密性の高い音声の文字起こし

### 1.4 主要な価値提案
- **ハイブリッド処理**: ローカル処理とクラウドAPIの選択可能
- **高精度音声認識**: 99言語対応、プロフェッショナルグレードの精度
- **リアルタイム処理**: ストリーミング音声認識による即座の文字起こし
- **多様なモデル選択**: 用途に応じた30以上のモデルバリエーション
- **クロスプラットフォーム**: iOS、macOS、watchOS対応
- **柔軟な課金システム**: サブスクリプションとプリペイドクレジットの併用

## 2. 機能要件

### 2.1 コア機能

#### 2.1.1 音声認識・文字起こし
- **リアルタイム音声認識**
  - ストリーミング音声認識による即座の文字起こし
  - 音声活動検出（VAD）による自動音声検出
  - 高精度タイムスタンプ付き文字起こし
  - リアルタイム表示と編集機能

- **音声ファイル文字起こし**
  - 複数オーディオ形式対応（MP3、WAV、M4A等）
  - バッチ処理による大量ファイル処理
  - 長時間音声の自動分割処理
  - 最大25MBファイルサイズ対応

#### 2.1.2 多言語対応
- **99言語サポート**
  - 主要言語: 英語、日本語、中国語、韓国語、スペイン語、フランス語等
  - 自動言語検出機能
  - リアルタイム言語切り替え
  - 言語別最適化モデル

#### 2.1.3 モデル管理
- **30以上のモデルバリエーション**
  - 基本モデル: Cription Swift、Cription mini、Cription Pro、Cription Enterprise
  - 量子化モデル: ストレージ効率化と高速処理
  - 特殊機能モデル: 話者分離、ターボ処理
  - 自動デバイス最適化

- **モデルカテゴリ**
  - Basic (English Only): 英語専用モデル
  - Basic (Multilingual): 多言語対応モデル
  - Quantized (English Only): 英語専用圧縮モデル
  - Quantized (Multilingual): 多言語対応圧縮モデル
  - Special Features: 特殊機能付きモデル
  - OpenAI Transcription: クラウドAPIモデル
  - Fireworks ASR: 高速クラウドASRモデル

### 2.2 ユーザーインターフェース

#### 2.2.1 メイン画面
- **ダッシュボード**
  - 使用状況概要
  - モデル選択
  - 履歴管理
  - 請求情報
  - ドキュメントアクセス

- **音声認識画面**
  - リアルタイム音声波形表示
  - 文字起こし結果のリアルタイム表示
  - 編集・修正機能
  - エクスポート機能
  - 翻訳機能（音声→英語）

- **ナビゲーション**
  - TranCription: ファイル音声認識
  - Stream: リアルタイム音声認識

#### 2.2.2 設定画面
- **言語設定**
  - ソース言語選択（99言語対応）
  - 表示言語設定（UI言語切り替え）
  - 自動言語検出設定

- **モデル設定**
  - モデル選択（30以上のモデル）
  - 自動最適化設定
  - パフォーマンス設定

- **プライバシー設定**
  - ローカル処理設定
  - データ保存設定
  - APIキー管理（OpenAI、Fireworks）

- **課金設定**
  - サブスクリプション管理
  - クレジット購入
  - 使用量追跡

### 2.3 データ管理

#### 2.3.1 履歴管理
- **文字起こし履歴**
  - 過去の文字起こし結果保存
  - 検索・フィルタリング機能
  - タグ付け機能
  - 自動バックアップ

#### 2.3.2 エクスポート機能
- **多様な出力形式**
  - テキストファイル（.txt）
  - Word文書（.docx）
  - PDF文書
  - SRT字幕ファイル
  - Excelファイル（.xlsx）

### 2.4 共有機能

#### 2.4.1 シェアエクステンション
- **他アプリからの直接アクセス**
  - テキストの直接処理（実装済み）
  - 音声ファイルの直接文字起こし（将来実装予定）
  - クイックアクセス機能

#### 2.4.2 共有機能
- **結果の共有**
  - 他のアプリへの結果送信
  - クラウドストレージ連携
  - メール・メッセージ送信
  - 共有テキストの管理

## 3. 技術要件

### 3.1 プラットフォーム対応
- **iOS**: 15.0以降
- **macOS**: 対応
- **watchOS**: 対応
- **シェアエクステンション**: 対応

### 3.2 技術スタック
- **フレームワーク**: SwiftUI
- **音声認識**: WhisperKit、OpenAI API、Fireworks ASR
- **ストレージ**: Core Data、Keychain、UserDefaults
- **課金**: StoreKit 2（サブスクリプション + プリペイドクレジット）
- **ログ**: OSLog
- **多言語**: LocalizedStringResource、Bundle Extension

### 3.3 パフォーマンス要件
- **リアルタイム処理**: 遅延500ms以下
- **ファイル処理**: 1時間音声を5分以内で処理
- **メモリ使用量**: 最大2GB
- **ストレージ**: モデル用最大5GB

### 3.4 セキュリティ要件
- **ハイブリッド処理**: ローカル処理とクラウドAPIの選択可能
- **暗号化**: KeychainによるAPIキー保護
- **プライバシー**: ローカル処理オプション（完全オフライン）
- **データ保護**: 音声データの適切な管理と削除

## 4. ビジネス要件

### 4.1 収益モデル

#### 4.1.1 サブスクリプションプラン
- **Free プラン**
  - 価格: 無料
  - 機能: ローカルモデルのみ利用可能
  - 制限: クラウドAPI利用不可

- **Weekly プラン**
  - 価格: 週間サブスクリプション
  - 機能: クラウドAPI利用可能
  - 制限: 月間300分

- **Monthly プラン**
  - 価格: 月間サブスクリプション
  - 機能: クラウドAPI利用可能
  - 制限: 月間300分

- **Yearly プラン**
  - 価格: 年間サブスクリプション
  - 機能: クラウドAPI利用可能
  - 制限: 月間300分

#### 4.1.2 プリペイドクレジットシステム
- **クレジット購入オプション**
  - 22クレジット: $19.99
  - 55クレジット: $49.99
  - 110クレジット: $99.99
  - 220クレジット: $199.99
  - 1100クレジット: $999.99

#### 4.1.3 料金体系
- **基本料金**: $0.003/分（gpt-4o-mini-transcribe）
- **高精度料金**: $0.006/分（gpt-4o-transcribe）
- **言語別調整**: 言語の複雑さに応じて1.2x〜3.5xの調整係数
- **バッチ処理割引**: 非リアルタイム処理で20%割引

### 4.2 市場戦略
- **ハイブリッド処理**: ローカル処理とクラウドAPIの選択可能
- **プロフェッショナル向け**: 高精度・高機能をアピール
- **多言語対応**: グローバル市場への展開（99言語対応）
- **アクセシビリティ**: 社会的価値の提供
- **柔軟な課金**: サブスクリプションとプリペイドの併用

## 5. ユーザー体験要件

### 5.1 ユーザビリティ
- **直感的な操作**: 3ステップ以内での文字起こし開始
- **レスポンシブデザイン**: 全デバイスサイズ対応
- **アクセシビリティ**: VoiceOver対応
- **多言語UI**: 主要言語でのUI表示

### 5.2 パフォーマンス
- **高速起動**: 3秒以内でのアプリ起動
- **スムーズな操作**: 60fps維持
- **バックグラウンド処理**: 効率的なリソース使用
- **ハイブリッド機能**: ローカル処理とクラウドAPIの選択可能
- **オフライン機能**: インターネット接続不要（ローカルモデル使用時）

### 5.3 エラーハンドリング
- **分かりやすいエラーメッセージ**: ユーザーフレンドリーな説明
- **自動復旧**: 一時的なエラーの自動解決
- **サポート情報**: 問題解決のための詳細情報提供

## 6. 品質要件

### 6.1 精度要件
- **音声認識精度**: 95%以上（標準的な音声品質）
- **言語検出精度**: 98%以上
- **タイムスタンプ精度**: 100ms以内

### 6.2 信頼性要件
- **稼働率**: 99.9%以上
- **データ損失**: 0%
- **クラッシュ率**: 0.1%以下

### 6.3 互換性要件
- **オーディオ形式**: MP3、WAV、M4A、AAC等
- **動画形式**: MP4、MOV等（音声抽出機能付き）
- **ファイルサイズ**: 最大25MB
- **音声長**: 制限なし（自動分割処理）
- **プラットフォーム**: iOS、macOS、watchOS対応

## 7. 制約事項

### 7.1 技術的制約
- **デバイス性能**: 古いデバイスでの性能制限
- **ストレージ容量**: モデルサイズによる容量要求
- **メモリ制限**: 大容量モデルのメモリ使用量

### 7.2 ビジネス制約
- **API料金**: OpenAI API、Fireworks ASRの使用料金
- **App Store審査**: Appleの審査ガイドライン遵守
- **プライバシー規制**: GDPR、CCPA等の規制遵守
- **課金システム**: StoreKit 2の制約

### 7.3 法的制約
- **著作権**: 音声コンテンツの著作権尊重
- **プライバシー**: 個人情報保護法遵守
- **輸出規制**: 暗号化技術の輸出規制

## 8. 成功指標

### 8.1 ユーザー指標
- **月間アクティブユーザー**: 10,000人
- **ユーザー保持率**: 70%（3ヶ月後）
- **アプリストア評価**: 4.5以上

### 8.2 ビジネス指標
- **月間収益**: $50,000
- **有料ユーザー率**: 15%
- **顧客獲得コスト**: $10以下

### 8.3 技術指標
- **アプリクラッシュ率**: 0.1%以下
- **音声認識精度**: 95%以上
- **処理速度**: リアルタイム処理500ms以内

## 9. リスク管理

### 9.1 技術リスク
- **API依存**: OpenAI API、Fireworks ASRの変更・停止リスク
- **デバイス互換性**: 新デバイスでの動作問題
- **パフォーマンス**: 大容量モデルの処理負荷
- **課金システム**: StoreKit 2の変更リスク

### 9.2 ビジネスリスク
- **競合**: 大手企業の参入
- **規制変更**: プライバシー規制の強化
- **市場変化**: 音声認識技術の進歩

### 9.3 対策
- **技術的対策**: 複数API対応、ローカル処理強化、ハイブリッド方式
- **ビジネス対策**: 差別化機能の強化、顧客関係構築、柔軟な課金システム
- **リスク監視**: 定期的なリスク評価と対策更新

---

**文書バージョン**: 2.0  
**最終更新日**: 2025年1月  
**作成者**: Cription開発チーム

## 10. 実装状況

### 10.1 実装済み機能
- **音声認識**: WhisperKit、OpenAI API、Fireworks ASR対応
- **モデル管理**: 30以上のモデルバリエーション
- **多言語対応**: 99言語対応
- **課金システム**: サブスクリプション + プリペイドクレジット
- **シェアエクステンション**: テキスト共有機能
- **UI**: SwiftUIベースのモダンなインターフェース
- **ダッシュボード**: 使用状況、履歴、請求管理
- **エクスポート**: 複数形式対応
- **翻訳機能**: 音声→英語翻訳

### 10.2 実装予定機能
- **カメラ翻訳機能**: 
  - カメラで撮影した文字を任意の言語に翻訳
  - translate mode on でマイクボタンをカメラボタンに変更
  - カメラボタン押下でカメラ起動、画面文字を翻訳表示
  - 参考: https://platform.openai.com/docs/models/gpt-4o-mini
  - 参考: https://platform.openai.com/docs/guides/speech-to-text#translations
